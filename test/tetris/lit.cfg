# vi: ft=python

import os
import sys
import shutil

import lit.formats

# name: The name of this test suite.
config.name = 'py-tetris'

# testFormat: The test format to use to interpret tests.
config.test_format = lit.formats.ShTest(execute_external=False)

# suffixes: A list of file extensions to treat as test files.
config.suffixes = ['.csv']

tetris_test_dir = os.path.dirname(__file__)
tetris_dir = os.path.join(tetris_test_dir, '..')
tetris_main_path = os.path.join(tetris_dir, 'tetris/main.py')

pytetris_path = tetris_main_path
check_path = shutil.which('OutputCheck')

config.substitutions.append(('%python', '"%s"' % (sys.executable)))
config.substitutions.append(('%pytetris', 'pykpn tetris'))
config.substitutions.append(('%check', '{} --comment=".*#" '.format(check_path)))
config.environment['PYKPN_CONF_PATH']=os.path.join(tetris_test_dir, "conf")
config.excludes = ['apps', 'conf', 'outputs']
